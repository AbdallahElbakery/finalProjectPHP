<!-- property-details.component.html -->
<div class="property-details-page">
  <!-- Header with Back Button -->
  <div class="container">
    <div class="page-header">
      <button class="back-btn">
        <a href="/properties" class="back-link" style="text-decoration: none;">
          <i class="fas fa-arrow-left"></i>
          Back to Properties
        </a>
      </button>
      <div class="property-status">
        <span class="status-badge available">Available</span>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container main-content">
    <div class="row">
      <!-- Left Side - Property Details -->
      <div class="col-lg-8 col-md-7">
        <div class="property-details-section">

          <!-- Main Image -->
          <div class="main-image-container">
            <img src='https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=1200'
              alt="Luxury Modern Villa with Pool" class="main-property-image">
            <div class="image-overlay">
              <div class="property-badges">
                <span class="badge featured">Featured</span>
                <span class="badge new">New</span>
              </div>
              <button class="expand-image-btn">
                <i class="fas fa-expand"></i>
                View Gallery
              </button>
            </div>
          </div>

          <!-- Property Info -->
          <div class="property-info-card">
            <div class="property-header">
              <div class="location-info">
                <i class="fas fa-map-marker-alt"></i>
                <span>Beverly Hills, California</span>
              </div>
            </div>

            <h1 class="property-title">Luxury Modern Villa with Pool and Garden</h1>

            <div class="price-section">
              <div class="current-price">
                <span class="price-amount">$2,850,000</span>
                <span class="price-type">/Sale</span>
              </div>
              <div class="price-history">
                <span class="previous-price">Was $3,200,000</span>

              </div>
            </div>

            <!-- Key Features -->
            <div class="key-features">
              <div class="feature-item">
                <i class="fas fa-bed"></i>
                <span class="feature-number">5</span>
                <span class="feature-label">Bedrooms</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-bath"></i>
                <span class="feature-number">4</span>
                <span class="feature-label">Bathrooms</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-ruler-combined"></i>
                <span class="feature-number">4,200</span>
                <span class="feature-label">Sq Ft</span>
              </div>

            </div>

            <!-- Description -->
            <div class="description-section">
              <h3 class="section-title">
                <i class="fas fa-info-circle"></i>
                Property Description
              </h3>
              <p class="property-description">This stunning luxury villa offers the perfect blend of modern architecture
                and comfortable living. Located in the prestigious Beverly Hills area, this property features spacious
                rooms, high-end finishes, and breathtaking views. The open-plan design creates a seamless flow between
                indoor and outdoor living spaces, making it ideal for both relaxation and entertaining.</p>
              <button class="read-more-btn">
                Read More
                <i class="fas fa-chevron-down"></i>
              </button>
            </div>

            <!-- Property Attributes Table -->
            <div class="attributes-section">
              <h3 class="section-title">
                <i class="fas fa-list"></i>
                Property Details
              </h3>
              <div class="attributes-table">
                <div class="attribute-row">
                  <span class="attribute-label">Property Type:</span>
                  <span class="attribute-value">Single Family Home</span>
                </div>
                <div class="attribute-row">
                  <span class="attribute-label">Year Built:</span>
                  <span class="attribute-value">2018</span>
                </div>

              </div>
            </div>

            <!-- Action Section with Toggleable Offer Form -->
            <div class="action-section">
              <div class="negotiate-offer">
                @if (!showOfferForm) {
                <button class="buy-now-btn" (click)="toggleOfferForm()">
                  <i class="fas fa-handshake"></i>
                  Make an Offer
                </button>
                }
                @if (showOfferForm) {
                <div class="offer-form-container">
                  <h4 class="offer-title">
                    <i class="fas fa-edit"></i>
                    قدم عرضك
                  </h4>
                  <form [formGroup]="offerForm" (ngSubmit)="submitOffer()" class="offer-form">
                    <div class="form-group">
                      <label for="suggested_price" class="form-label">السعر المقترح</label>
                      <div class="input-group">
                        <span class="input-prefix">$</span>
                        <input 
                          type="number" 
                          id="suggested_price"
                          formControlName="suggested_price" 
                          class="form-control"
                          placeholder="أدخل السعر المقترح (مثال: 2500000)"
                          [class.is-invalid]="offerForm.get('suggested_price')?.invalid && offerForm.get('suggested_price')?.touched"
                        />
                      </div>
                      @if (offerForm.get('suggested_price')?.invalid && offerForm.get('suggested_price')?.touched) {
                        <div class="invalid-feedback">
                          يرجى إدخال سعر صحيح
                        </div>
                      }
                    </div>
                    
                    @if (submitMessage) {
                      <div class="alert" [class.alert-success]="submitSuccess" [class.alert-danger]="!submitSuccess">
                        {{ submitMessage }}
                      </div>
                    }
                    
                    <div class="form-actions">
                      <button type="submit" class="submit-btn" [disabled]="offerForm.invalid || isSubmitting">
                        @if (isSubmitting) {
                          <i class="fas fa-spinner fa-spin"></i>
                          جاري الإرسال...
                        } @else {
                          <i class="fas fa-paper-plane"></i>
                          إرسال العرض
                        }
                      </button>
                      <button type="button" class="cancel-btn" (click)="toggleOfferForm()" [disabled]="isSubmitting">
                        <i class="fas fa-times"></i>
                        إلغاء
                      </button>
                    </div>
                  </form>
                </div>
                }
              </div>
            </div>


            <!-- Image Gallery -->
            <div class="gallery-section">
              <h3 class="section-title">
                <i class="fas fa-images"></i>
                Property Gallery
              </h3>
              <div class="gallery-grid">
                <div class="gallery-item">
                  <img src="https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400" alt="Spacious Living Room"
                    class="gallery-image">
                  <div class="gallery-overlay">
                    <i class="fas fa-search-plus"></i>
                  </div>
                </div>
                <div class="gallery-item">
                  <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400" alt="Modern Kitchen"
                    class="gallery-image">
                  <div class="gallery-overlay">
                    <i class="fas fa-search-plus"></i>
                  </div>
                </div>
                <div class="gallery-item">
                  <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=400" alt="Master Bedroom"
                    class="gallery-image">
                  <div class="gallery-overlay">
                    <i class="fas fa-search-plus"></i>
                  </div>
                </div>
                <div class="gallery-item">
                  <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=400" alt="Swimming Pool"
                    class="gallery-image">
                  <div class="gallery-overlay">
                    <i class="fas fa-search-plus"></i>
                  </div>
                </div>
                <div class="gallery-item">
                  <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=400" alt="Beautiful Garden"
                    class="gallery-image">
                  <div class="gallery-overlay">
                    <i class="fas fa-search-plus"></i>
                  </div>
                </div>
                <div class="gallery-item">
                  <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400" alt="Luxury Bathroom"
                    class="gallery-image">
                  <div class="gallery-overlay">
                    <i class="fas fa-search-plus"></i>
                  </div>
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>

      <!-- Right Side - Seller Info -->
      <div class="col-lg-4 col-md-5">
        <div class="seller-info-sidebar">

          <!-- Main Seller Card -->
          <div class="seller-card">
            <div class="seller-header">
              <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100" alt="Sarah Johnson"
                class="seller-avatar">
              <div class="seller-details">
                <h3 class="seller-name">Mohamed Ali</h3>
                <p class="seller-company">Premium Real Estate Group</p>
                <div class="seller-rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">4.9 (127 reviews)</span>
                </div>
              </div>
            </div>
          </div>



          <!-- Similar Properties -->
          <div class="similar-properties-card">
            <h4 class="similar-title">
              <i class="fas fa-home"></i>
              Similar Properties
            </h4>
            <div class="similar-list">
              <div class="similar-item">
                <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=400"
                  alt="Modern Villa in Malibu" class="similar-image">
                <div class="similar-info">
                  <h5 class="similar-title">Modern Villa in Malibu</h5>
                  <p class="similar-location">Malibu, California</p>
                  <span class="similar-price">$3,200,000</span>
                </div>
              </div>
              <div class="similar-item">
                <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=400"
                  alt="Luxury Estate in Manhattan Beach" class="similar-image">
                <div class="similar-info">
                  <h5 class="similar-title">Luxury Estate in Manhattan Beach</h5>
                  <p class="similar-location">Manhattan Beach, California</p>
                  <span class="similar-price">$2,750,000</span>
                </div>
              </div>
              <div class="similar-item">
                <img src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=400"
                  alt="Contemporary Home in Venice" class="similar-image">
                <div class="similar-info">
                  <h5 class="similar-title">Contemporary Home in Venice</h5>
                  <p class="similar-location">Venice, California</p>
                  <span class="similar-price">$2,450,000</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Image Modal -->
<div class="image-modal">
  <div class="modal-content">
    <button class="close-modal">
      <i class="fas fa-times"></i>
    </button>
    <img src="" alt="Property Image" class="modal-image">
    <div class="modal-navigation">
      <button class="nav-btn prev">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="nav-btn next">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
    <div class="image-counter">
      1 / 6
    </div>
  </div>
</div>