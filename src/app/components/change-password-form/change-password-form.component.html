<main class="register-form-section">
  <div class="profile-card">
    <h2 class="profile-title">Change Password</h2>

    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="edit-form">

      <!-- Current Password -->
      <div class="input-group">
        <label for="currentPassword">Current Password</label>
        <input 
          type="password" 
          id="currentPassword" 
          formControlName="currentPassword" 
          placeholder="Enter your current password"
          [ngClass]="{'invalid': passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched}">
        <span class="error-msg" *ngIf="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched">
          Current password is required
        </span>
      </div>

      <!-- New Password -->
      <div class="input-group">
        <label for="newPassword">New Password</label>
        <input 
          type="password" 
          id="newPassword" 
          formControlName="newPassword" 
          placeholder="Enter a new password"
          [ngClass]="{'invalid': passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched}">
        <span class="error-msg" *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched">
          Password must be at least 6 characters
        </span>
      </div>

      <!-- Confirm New Password -->
      <div class="input-group">
        <label for="confirmPassword">Confirm New Password</label>
        <input 
          type="password" 
          id="confirmPassword" 
          formControlName="confirmPassword" 
          placeholder="Re-enter new password"
          [ngClass]="{'invalid': passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched || passwordForm.hasError('passwordMismatch')}">
        <span class="error-msg" *ngIf="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched">
          Please confirm your new password
        </span>
        <span class="error-msg" *ngIf="passwordForm.hasError('passwordMismatch') && passwordForm.get('confirmPassword')?.touched">
          Passwords do not match
        </span>
      </div>

      <!-- زر الحفظ -->
      <div class="form-actions">
        <button type="submit" class="save-btn" [disabled]="!passwordForm.valid">
          <i class="fas fa-key"></i> Update Password
        </button>
      </div>
    </form>
  </div>
</main>
