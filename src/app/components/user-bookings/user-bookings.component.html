<div class="user-bookings-page">
  <div class="container">
    <!-- Header -->
    <div class="page-header">
      <h1 class="page-title">
        <i class="fas fa-calendar-check"></i>
        My Bookings
      </h1>
      <p class="page-subtitle">Manage all your property bookings</p>
    </div>

    <!-- Loading State -->
    @if (loading) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p>Loading bookings...</p>
      </div>
    }

    <!-- Error State -->
    @if (error && !loading) {
      <div class="error-container">
        <i class="fas fa-exclamation-triangle"></i>
        <p>{{ error }}</p>
        <button class="retry-btn" (click)="loadBookings()">
          <i class="fas fa-redo"></i>
          Try Again
        </button>
      </div>
    }

    <!-- Bookings List -->
    @if (!loading && !error) {
      @if (bookings.length === 0) {
        <div class="empty-state">
          <i class="fas fa-calendar-times"></i>
          <h3>No Bookings Found</h3>
          <p>You haven't made any property bookings yet. Start browsing and find the perfect property for you!</p>
          <a href="/properties" class="browse-btn">
            <i class="fas fa-search"></i>
            Browse Properties
          </a>
        </div>
      } @else {
        <div class="bookings-grid">
          @for (booking of bookings; track booking.id) {
            <div class="booking-card">
              <!-- Property Image -->
              <div class="booking-image">
                @if (booking.property?.images && booking.property.images.length > 0) {
                  <img [src]="'http://127.0.0.1:8000/uploads/' + booking.property.images[0]" [alt]="booking.property?.name || 'Property'">
                } @else if (booking.property?.image) {
                  <img [src]="'http://127.0.0.1:8000/uploads/' + booking.property.image" [alt]="booking.property?.name || 'Property'">
                } @else {
                  <div class="no-image">
                    <i class="fas fa-home"></i>
                  </div>
                }
                <div class="status-badge" [class]="getStatusClass(booking.status)">
                  {{ getStatusText(booking.status) }}
                </div>
              </div>

              <!-- Booking Details -->
              <div class="booking-details">
                <h3 class="property-name">
                  {{ booking.property?.name || 'Property Not Found' }}
                </h3>
                
                <div class="booking-info">
                  <div class="info-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span class="label">Suggested Price:</span>
                    <span class="value">{{ formatPrice(booking.suggested_price) }}</span>
                  </div>
                  
                  <div class="info-item">
                    <i class="fas fa-calendar"></i>
                    <span class="label">Booking Date:</span>
                    <span class="value">{{ formatDate(booking.created_at || '') }}</span>
                  </div>

                  @if (booking.property?.location) {
                    <div class="info-item">
                      <i class="fas fa-map-marker-alt"></i>
                      <span class="label">Location:</span>
                      <span class="value">{{ booking.property.location }}</span>
                    </div>
                  }
                </div>

                <!-- Actions -->
                <div class="booking-actions">
                  @if (booking.status === 'pending') {
                    <button class="action-btn edit-btn" (click)="editBooking(booking)">
                      <i class="fas fa-edit"></i>
                      Edit Price
                    </button>
                  }
                  
                  <button class="action-btn delete-btn" (click)="deleteBooking(booking.id!)">
                    <i class="fas fa-trash"></i>
                    Delete Booking
                  </button>
                </div>
              </div>
            </div>
          }
        </div>
      }
    }